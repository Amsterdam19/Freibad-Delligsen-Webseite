{
  "version": 3,
  "sources": ["../../@swup/body-class-plugin/src/index.ts"],
  "sourcesContent": ["import { Handler } from 'swup';\nimport Plugin from '@swup/plugin';\n\ntype Options = {\n\t/** If set, only classes beginning with this string will be added/removed. */\n\tprefix: string;\n};\n\nexport default class SwupBodyClassPlugin extends Plugin {\n\tname = 'SwupBodyClassPlugin';\n\n\trequires = { swup: '>=4' };\n\n\tdefaults: Options = {\n\t\tprefix: ''\n\t};\n\toptions: Options;\n\n\tconstructor(options: Partial<Options> = {}) {\n\t\tsuper();\n\t\tthis.options = { ...this.defaults, ...options };\n\t}\n\n\tmount() {\n\t\tthis.on('content:replace', this.updateBodyClass);\n\t}\n\n\tupdateBodyClass: Handler<'content:replace'> = (visit, { page: { html } }) => {\n\t\tthis.updateClassNames(document.body, this.getBodyElement(html));\n\t};\n\n\tgetBodyElement(html: string): HTMLElement {\n\t\tconst doc = new DOMParser().parseFromString(html, 'text/html');\n\t\treturn doc.querySelector<HTMLElement>('body')!;\n\t}\n\n\tupdateClassNames(el: HTMLElement, newEl: HTMLElement) {\n\t\tconst remove = [...el.classList].filter((className) => this.isValidClassName(className));\n\t\tconst add = [...newEl.classList].filter((className) => this.isValidClassName(className));\n\t\tel.classList.remove(...remove);\n\t\tel.classList.add(...add);\n\t}\n\n\tisValidClassName(className: string) {\n\t\treturn className && className.startsWith(this.options.prefix);\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;AAQqB,IAAAA,KAAA,cAA4BC,EAAAA;EAUhDC,YAAYC,IAA4B,CAAE,GAAA;AACzCC,UAAAA,GAAQC,KAVTC,OAAO,uBAAqBD,KAE5BE,WAAW,EAAEC,MAAM,MAAA,GAEnBC,KAAAA,WAAoB,EACnBC,QAAQ,GAAA,GACRL,KACDF,UAAAA,QAAOE,KAWPM,kBAA8C,CAACC,IAAAA,EAASC,MAAAA,EAAQC,MAAAA,GAAAA,EAAAA,MAAAA;AAC/DT,WAAKU,iBAAiBC,SAASC,MAAMZ,KAAKa,eAAeJ,EAAAA,CAAAA;IAC1D,GATCT,KAAKF,UAAOgB,EAAA,CAAA,GAAQd,KAAKI,UAAaN,CAAAA;EACvC;EAEAiB,QAAAA;AACCf,SAAKgB,GAAG,mBAAmBhB,KAAKM,eAAAA;EACjC;EAMAO,eAAeJ,GAAAA;AAEd,WADY,IAAIQ,YAAYC,gBAAgBT,GAAM,WAAA,EACvCU,cAA2B,MAAA;EACvC;EAEAT,iBAAiBU,GAAiBC,IAAAA;AACjC,UAAMC,KAAS,CAAA,GAAIF,EAAGG,SAAAA,EAAWC,OAAQC,CAAAA,OAAczB,KAAK0B,iBAAiBD,EAAAA,CAAAA,GACvEE,IAAM,CAAA,GAAIN,GAAME,SAAAA,EAAWC,OAAQC,CAAAA,OAAczB,KAAK0B,iBAAiBD,EAAAA,CAAAA;AAC7EL,MAAGG,UAAUD,OAAAA,GAAUA,EAAAA,GACvBF,EAAGG,UAAUI,IAAAA,GAAOA,CAAAA;EACrB;EAEAD,iBAAiBD,GAAAA;AAChB,WAAOA,KAAaA,EAAUG,WAAW5B,KAAKF,QAAQO,MAAAA;EACvD;AAAA;",
  "names": ["SwupBodyClassPlugin", "Plugin", "constructor", "options", "super", "this", "name", "requires", "swup", "defaults", "prefix", "updateBodyClass", "visit", "page", "html", "updateClassNames", "document", "body", "getBodyElement", "_extends", "mount", "on", "DOMParser", "parseFromString", "querySelector", "el", "newEl", "remove", "classList", "filter", "className", "isValidClassName", "add", "startsWith"]
}
