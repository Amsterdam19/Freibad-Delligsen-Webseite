{"version":3,"file":"index.umd.js","sources":["../node_modules/@swup/plugin/dist/index.modern.js","../node_modules/scrl/dist/index.modern.js","../src/index.js"],"sourcesContent":["function r(){return r=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r},r.apply(this,arguments)}const n=r=>String(r).split(\".\").map(r=>String(parseInt(r||\"0\",10))).concat([\"0\",\"0\"]).slice(0,3).join(\".\");class e{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach(r=>r()),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error(\"You must define a name of plugin when creating a class.\")}_afterUnmount(){}_checkRequirements(){return\"object\"!=typeof this.requires||Object.entries(this.requires).forEach(([r,e])=>{if(!function(r,e,t){const s=function(r,n){var e;if(\"swup\"===r)return null!=(e=n.version)?e:\"\";{var t;const e=n.findPlugin(r);return null!=(t=null==e?void 0:e.version)?t:\"\"}}(r,t);return!!s&&((r,e)=>e.every(e=>{const[,t,s]=e.match(/^([\\D]+)?(.*)$/)||[];var o,i;return((r,n)=>{const e={\"\":r=>0===r,\">\":r=>r>0,\">=\":r=>r>=0,\"<\":r=>r<0,\"<=\":r=>r<=0};return(e[n]||e[\"\"])(r)})((i=s,o=n(o=r),i=n(i),o.localeCompare(i,void 0,{numeric:!0})),t||\">=\")}))(s,e)}(r,e=Array.isArray(e)?e:[e],this.swup)){const n=`${r} ${e.join(\", \")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${n}`)}}),!0}on(r,n,e={}){var t;n=!(t=n).name.startsWith(\"bound \")||t.hasOwnProperty(\"prototype\")?n.bind(this):n;const s=this.swup.hooks.on(r,n,e);return this.handlersToUnregister.push(s),s}once(n,e,t={}){return this.on(n,e,r({},t,{once:!0}))}before(n,e,t={}){return this.on(n,e,r({},t,{before:!0}))}replace(n,e,t={}){return this.on(n,e,r({},t,{replace:!0}))}off(r,n){return this.swup.hooks.off(r,n)}}export{e as default};\n//# sourceMappingURL=index.modern.js.map\n","function t(){return t=Object.assign?Object.assign.bind():function(t){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s])}return t},t.apply(this,arguments)}class i{constructor(i){this._raf=null,this._positionY=0,this._velocityY=0,this._targetPositionY=0,this._targetPositionYWithOffset=0,this._direction=0,this.scrollTo=t=>{if(t&&t.nodeType)this._targetPositionY=Math.round(t.getBoundingClientRect().top+window.pageYOffset);else{if(parseInt(this._targetPositionY)!==this._targetPositionY)return void console.error(\"Argument must be a number or an element.\");this._targetPositionY=Math.round(t)}this._targetPositionY>document.documentElement.scrollHeight-window.innerHeight&&(this._targetPositionY=document.documentElement.scrollHeight-window.innerHeight),this._positionY=document.body.scrollTop||document.documentElement.scrollTop,this._direction=this._positionY>this._targetPositionY?-1:1,this._targetPositionYWithOffset=this._targetPositionY+this._direction,this._velocityY=0,this._positionY!==this._targetPositionY?(this.options.onStart(),this._animate()):this.options.onAlreadyAtPositions()},this._animate=()=>{this._update(),this._render(),1===this._direction&&this._targetPositionY>this._positionY||-1===this._direction&&this._targetPositionY<this._positionY?(this._raf=requestAnimationFrame(this._animate),this.options.onTick()):(this._positionY=this._targetPositionY,this._render(),this._raf=null,this.options.onTick(),this.options.onEnd())},this._update=()=>{const t=this._targetPositionYWithOffset-this._positionY;return this._velocityY+=t*this.options.acceleration,this._velocityY*=this.options.friction,this._positionY+=this._velocityY,Math.abs(t)},this._render=()=>{window.scrollTo(0,this._positionY)},this.options=t({},{onAlreadyAtPositions:()=>{},onCancel:()=>{},onEnd:()=>{},onStart:()=>{},onTick:()=>{},friction:.7,acceleration:.04},i),i&&i.friction&&(this.options.friction=1-i.friction),window.addEventListener(\"mousewheel\",t=>{this._raf&&(this.options.onCancel(),cancelAnimationFrame(this._raf),this._raf=null)},{passive:!0})}}export{i as default};\n//# sourceMappingURL=index.modern.js.map\n","import Plugin from '@swup/plugin';\nimport { getCurrentUrl, queryAll } from 'swup';\nimport Scrl from 'scrl';\n\n/**\n * Scroll Plugin\n * @extends Plugin\n */\nexport default class SwupScrollPlugin extends Plugin {\n\tname = 'SwupScrollPlugin';\n\n\trequires = { swup: '>=4' };\n\n\tdefaults = {\n\t\tdoScrollingRightAway: false,\n\t\tanimateScroll: {\n\t\t\tbetweenPages: true,\n\t\t\tsamePageWithHash: true,\n\t\t\tsamePage: true\n\t\t},\n\t\tscrollFriction: 0.3,\n\t\tscrollAcceleration: 0.04,\n\t\tgetAnchorElement: null,\n\t\toffset: 0,\n\t\tscrollContainers: `[data-swup-scroll-container]`,\n\t\tshouldResetScrollPosition: (link) => true\n\t};\n\n\tconstructor(options = {}) {\n\t\tsuper();\n\t\tthis.options = { ...this.defaults, ...options };\n\t}\n\n\tmount() {\n\t\tconst swup = this.swup;\n\n\t\tswup.hooks.create('scroll:start');\n\t\tswup.hooks.create('scroll:end');\n\n\t\t// Initialize Scrl lib for smooth animations\n\t\tthis.scrl = new Scrl({\n\t\t\tonStart: () => swup.hooks.callSync('scroll:start'),\n\t\t\tonEnd: () => swup.hooks.callSync('scroll:end'),\n\t\t\tonCancel: () => swup.hooks.callSync('scroll:end'),\n\t\t\tfriction: this.options.scrollFriction,\n\t\t\tacceleration: this.options.scrollAcceleration\n\t\t});\n\n\t\t// Add scrollTo method to swup and animate based on current animateScroll option\n\t\tswup.scrollTo = (offset, animate = true) => {\n\t\t\tif (animate) {\n\t\t\t\tthis.scrl.scrollTo(offset);\n\t\t\t} else {\n\t\t\t\tswup.hooks.callSync('scroll:start');\n\t\t\t\twindow.scrollTo(0, offset);\n\t\t\t\tswup.hooks.callSync('scroll:end');\n\t\t\t}\n\t\t};\n\n\t\t// This object will hold all scroll positions\n\t\tthis.scrollPositionsStore = {};\n\t\t// this URL helps with storing the current scroll positions on `willReplaceContent`\n\t\tthis.currentCacheKey = this.getCurrentCacheKey();\n\n\t\t// disable browser scroll control on popstates when\n\t\t// animateHistoryBrowsing option is enabled in swup.\n\t\t// Cache the previous setting to be able to properly restore it on unmount\n\t\tthis.previousScrollRestoration = window.history.scrollRestoration;\n\t\tif (swup.options.animateHistoryBrowsing) {\n\t\t\twindow.history.scrollRestoration = 'manual';\n\t\t}\n\n\t\t// reset scroll positions when a visit starts\n\t\tthis.on('visit:start', this.maybeResetScrollPositions);\n\n\t\t// scroll to the top of the page when a visit starts, before replacing the content\n\t\tthis.on('visit:start', this.onVisitStart);\n\n\t\t// store the current scroll positions before replacing the content\n\t\tthis.before('content:replace', this.onBeforeReplaceContent);\n\n\t\t// scroll to the top or target element after replacing the content\n\t\tthis.replace('content:scroll', this.onScrollToContent);\n\n\t\t// scroll to the top of the page\n\t\tthis.replace('scroll:top', this.handleScrollToTop);\n\n\t\t// scroll to an anchor on the same page\n\t\tthis.replace('scroll:anchor', this.handleScrollToAnchor);\n\t}\n\n\t/**\n\t * Runs when the plugin is unmounted\n\t */\n\tunmount() {\n\t\tsuper.unmount();\n\n\t\twindow.history.scrollRestoration = this.previousScrollRestoration;\n\t\tdelete this.swup.scrollTo;\n\t\tdelete this.scrl;\n\t}\n\n\t/**\n\t * Detects if a scroll should be animated, based on context\n\t * @param {string} context\n\t * @returns {boolean}\n\t */\n\tshouldAnimate(context) {\n\t\tif (typeof this.options.animateScroll === 'boolean') {\n\t\t\treturn this.options.animateScroll;\n\t\t}\n\t\treturn this.options.animateScroll[context];\n\t}\n\n\t/**\n\t * Get an element based on anchor\n\t * @param {string} hash\n\t * @returns {mixed}\n\t */\n\tgetAnchorElement = (hash = '') => {\n\t\t// Look for a custom function provided via the plugin options\n\t\tif (typeof this.options.getAnchorElement === 'function') {\n\t\t\treturn this.options.getAnchorElement(hash);\n\t\t} else {\n\t\t\treturn this.swup.getAnchorElement(hash);\n\t\t}\n\t};\n\n\t/**\n\t * Get the offset for a scroll\n\t * @param {(HtmlELement|null)} element\n\t * @returns {number}\n\t */\n\tgetOffset = (element = null) => {\n\t\t// If options.offset is a function, apply and return it\n\t\tif (typeof this.options.offset === 'function') {\n\t\t\treturn parseInt(this.options.offset(element), 10);\n\t\t}\n\t\t// Otherwise, return the sanitized offset\n\t\treturn parseInt(this.options.offset, 10);\n\t};\n\n\t/**\n\t * Scroll to top on `scroll:top` hook\n\t */\n\thandleScrollToTop = () => {\n\t\tthis.swup.scrollTo(0, this.shouldAnimate('samePage'));\n\t\treturn true;\n\t};\n\n\t/**\n\t * Scroll to anchor on `scroll:anchor` hook\n\t */\n\thandleScrollToAnchor = (visit, { hash }) => {\n\t\treturn this.maybeScrollToAnchor(hash, this.shouldAnimate('samePageWithHash'));\n\t};\n\n\t/**\n\t * Attempts to scroll to an anchor\n\t * @param {string} hash\n\t * @param {boolean} animate\n\t * @returns {boolean}\n\t */\n\tmaybeScrollToAnchor(hash, animate = false) {\n\t\tif (!hash) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst element = this.getAnchorElement(hash);\n\t\tif (!element) {\n\t\t\tconsole.warn(`Anchor target ${hash} not found`);\n\t\t\treturn false;\n\t\t}\n\t\tif (!(element instanceof Element)) {\n\t\t\tconsole.warn(`Anchor target ${hash} is not a DOM node`);\n\t\t\treturn false;\n\t\t}\n\n\t\tconst { top: elementTop } = element.getBoundingClientRect();\n\t\tconst top = elementTop + window.scrollY - this.getOffset(element);\n\t\tthis.swup.scrollTo(top, animate);\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Check whether to scroll in `visit:start` hook\n\t */\n\tonVisitStart = (visit) => {\n\t\tif (this.options.doScrollingRightAway && !visit.scroll.target) {\n\t\t\tvisit.scroll.scrolledToContent = true;\n\t\t\tthis.doScrollingBetweenPages(visit);\n\t\t}\n\t};\n\n\t/**\n\t * Check whether to scroll in `content:scroll` hook\n\t */\n\tonScrollToContent = (visit) => {\n\t\tif (!visit.scroll.scrolledToContent) {\n\t\t\tthis.doScrollingBetweenPages(visit);\n\t\t}\n\t\tthis.restoreScrollContainers(visit);\n\t};\n\n\t/**\n\t * Scrolls the window\n\t * @returns {void}\n\t */\n\tdoScrollingBetweenPages = (visit) => {\n\t\t// Bail early on popstate if not animated: browser will handle it\n\t\tif (visit.history.popstate && !visit.animation.animate) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Try scrolling to a given anchor\n\t\tif (this.maybeScrollToAnchor(visit.scroll.target, this.shouldAnimate('betweenPages'))) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Allow not resetting scroll position\n\t\tif (!visit.scroll.reset) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Finally, scroll to either the stored scroll position or to the very top of the page\n\t\tconst scrollPositions = this.getStoredScrollPositions(this.getCurrentCacheKey()) || {};\n\t\tconst top = scrollPositions.window?.top || 0;\n\n\t\t// Give possible JavaScript time to execute before scrolling\n\t\trequestAnimationFrame(() => this.swup.scrollTo(top, this.shouldAnimate('betweenPages')));\n\t};\n\n\t/**\n\t * Stores the current scroll positions for the URL we just came from\n\t */\n\tonBeforeReplaceContent = () => {\n\t\tthis.storeScrollPositions(this.currentCacheKey);\n\t\tthis.currentCacheKey = this.getCurrentCacheKey();\n\t};\n\n\t/**\n\t * Deletes the scroll positions for the URL a link is pointing to,\n\t * if shouldResetScrollPosition evaluates to true\n\t * @returns {void}\n\t */\n\tmaybeResetScrollPositions(visit) {\n\t\tconst { url } = visit.to;\n\t\tconst { el } = visit.trigger;\n\t\tconst shouldReset = !el || this.options.shouldResetScrollPosition(el);\n\t\tif (shouldReset) {\n\t\t\tthis.resetScrollPositions(url);\n\t\t}\n\t}\n\n\t/**\n\t * Stores the scroll positions for the current URL\n\t * @param {string} url\n\t * @returns {void}\n\t */\n\tstoreScrollPositions(url) {\n\t\t// retrieve the current scroll position for all containers\n\t\tconst containers = queryAll(this.options.scrollContainers).map((el) => ({\n\t\t\ttop: el.scrollTop,\n\t\t\tleft: el.scrollLeft\n\t\t}));\n\n\t\t// construct the final object entry, with the window scroll positions added\n\t\tthis.scrollPositionsStore[url] = {\n\t\t\twindow: { top: window.scrollY, left: window.scrollX },\n\t\t\tcontainers\n\t\t};\n\t}\n\n\t/**\n\t * Resets stored scroll positions for a given URL\n\t * @param {string} url\n\t */\n\tresetScrollPositions(url) {\n\t\tconst cacheKey = this.swup.resolveUrl(url);\n\t\tdelete this.scrollPositionsStore[cacheKey];\n\t\tthis.scrollPositionsStore[cacheKey] = null;\n\t}\n\n\t/**\n\t * Get the stored scroll positions for a given URL from the cache\n\t * @returns {(object|undefined)}\n\t */\n\tgetStoredScrollPositions(url) {\n\t\tconst cacheKey = this.swup.resolveUrl(url);\n\t\treturn this.scrollPositionsStore[cacheKey];\n\t}\n\n\t/**\n\t * Restore the scroll positions for all matching scrollContainers\n\t * @returns void\n\t */\n\trestoreScrollContainers() {\n\t\t// get the stored scroll positions from the cache\n\t\tconst scrollPositions = this.getStoredScrollPositions(this.getCurrentCacheKey()) || {};\n\t\tif (scrollPositions.containers == null) {\n\t\t\treturn;\n\t\t}\n\n\t\t// cycle through all containers on the current page and restore their scroll positions, if appropriate\n\t\tqueryAll(this.options.scrollContainers).forEach((el, index) => {\n\t\t\tconst scrollPosition = scrollPositions.containers[index];\n\t\t\tif (scrollPosition == null) return;\n\t\t\tel.scrollTop = scrollPosition.top;\n\t\t\tel.scrollLeft = scrollPosition.left;\n\t\t});\n\t}\n\n\t/**\n\t * Get the current cache key for the scroll positions.\n\t * @returns {string}\n\t */\n\tgetCurrentCacheKey() {\n\t\treturn this.swup.resolveUrl(getCurrentUrl());\n\t}\n}\n"],"names":["normalizeVersion","version","String","split","map","segment","parseInt","concat","slice","join","installed","requirements","every","required","comparator","match","a","b","comparisonResult","comparators","r","localeCompare","numeric","Scrl","constructor","options","this","_raf","_positionY","_velocityY","_targetPositionY","_targetPositionYWithOffset","_direction","scrollTo","offset","nodeType","Math","round","getBoundingClientRect","top","window","pageYOffset","console","error","document","documentElement","scrollHeight","innerHeight","body","scrollTop","onStart","_animate","onAlreadyAtPositions","_update","_render","requestAnimationFrame","onTick","onEnd","distance","acceleration","friction","abs","_extends","onCancel","addEventListener","event","cancelAnimationFrame","passive","Plugin","_this","super","name","requires","swup","defaults","doScrollingRightAway","animateScroll","betweenPages","samePageWithHash","samePage","scrollFriction","scrollAcceleration","getAnchorElement","scrollContainers","shouldResetScrollPosition","link","hash","getOffset","element","handleScrollToTop","shouldAnimate","handleScrollToAnchor","visit","_ref","maybeScrollToAnchor","onVisitStart","scroll","target","scrolledToContent","doScrollingBetweenPages","onScrollToContent","restoreScrollContainers","history","popstate","animation","animate","reset","getStoredScrollPositions","getCurrentCacheKey","onBeforeReplaceContent","storeScrollPositions","currentCacheKey","mount","_this2","hooks","create","scrl","callSync","scrollPositionsStore","previousScrollRestoration","scrollRestoration","animateHistoryBrowsing","on","maybeResetScrollPositions","before","replace","unmount","context","warn","Element","elementTop","scrollY","url","to","el","trigger","resetScrollPositions","containers","queryAll","left","scrollLeft","scrollX","resolveUrl","cacheKey","scrollPositions","forEach","index","scrollPosition","getCurrentUrl"],"mappings":"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"}