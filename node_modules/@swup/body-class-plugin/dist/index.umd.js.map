{"version":3,"file":"index.umd.js","sources":["../node_modules/@swup/plugin/dist/index.modern.js","../src/index.ts"],"sourcesContent":["function r(){return r=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r},r.apply(this,arguments)}const n=r=>String(r).split(\".\").map(r=>String(parseInt(r||\"0\",10))).concat([\"0\",\"0\"]).slice(0,3).join(\".\");class e{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach(r=>r()),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error(\"You must define a name of plugin when creating a class.\")}_afterUnmount(){}_checkRequirements(){return\"object\"!=typeof this.requires||Object.entries(this.requires).forEach(([r,e])=>{if(!function(r,e,t){const s=function(r,n){var e;if(\"swup\"===r)return null!=(e=n.version)?e:\"\";{var t;const e=n.findPlugin(r);return null!=(t=null==e?void 0:e.version)?t:\"\"}}(r,t);return!!s&&((r,e)=>e.every(e=>{const[,t,s]=e.match(/^([\\D]+)?(.*)$/)||[];var o,i;return((r,n)=>{const e={\"\":r=>0===r,\">\":r=>r>0,\">=\":r=>r>=0,\"<\":r=>r<0,\"<=\":r=>r<=0};return(e[n]||e[\"\"])(r)})((i=s,o=n(o=r),i=n(i),o.localeCompare(i,void 0,{numeric:!0})),t||\">=\")}))(s,e)}(r,e=Array.isArray(e)?e:[e],this.swup)){const n=`${r} ${e.join(\", \")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${n}`)}}),!0}on(r,n,e={}){var t;n=!(t=n).name.startsWith(\"bound \")||t.hasOwnProperty(\"prototype\")?n.bind(this):n;const s=this.swup.hooks.on(r,n,e);return this.handlersToUnregister.push(s),s}once(n,e,t={}){return this.on(n,e,r({},t,{once:!0}))}before(n,e,t={}){return this.on(n,e,r({},t,{before:!0}))}replace(n,e,t={}){return this.on(n,e,r({},t,{replace:!0}))}off(r,n){return this.swup.hooks.off(r,n)}}export{e as default};\n//# sourceMappingURL=index.modern.js.map\n","import { Handler } from 'swup';\nimport Plugin from '@swup/plugin';\n\ntype Options = {\n\t/** If set, only classes beginning with this string will be added/removed. */\n\tprefix: string;\n};\n\nexport default class SwupBodyClassPlugin extends Plugin {\n\tname = 'SwupBodyClassPlugin';\n\n\trequires = { swup: '>=4' };\n\n\tdefaults: Options = {\n\t\tprefix: ''\n\t};\n\toptions: Options;\n\n\tconstructor(options: Partial<Options> = {}) {\n\t\tsuper();\n\t\tthis.options = { ...this.defaults, ...options };\n\t}\n\n\tmount() {\n\t\tthis.on('content:replace', this.updateBodyClass);\n\t}\n\n\tupdateBodyClass: Handler<'content:replace'> = (visit, { page: { html } }) => {\n\t\tthis.updateClassNames(document.body, this.getBodyElement(html));\n\t};\n\n\tgetBodyElement(html: string): HTMLElement {\n\t\tconst doc = new DOMParser().parseFromString(html, 'text/html');\n\t\treturn doc.querySelector<HTMLElement>('body')!;\n\t}\n\n\tupdateClassNames(el: HTMLElement, newEl: HTMLElement) {\n\t\tconst remove = [...el.classList].filter((className) => this.isValidClassName(className));\n\t\tconst add = [...newEl.classList].filter((className) => this.isValidClassName(className));\n\t\tel.classList.remove(...remove);\n\t\tel.classList.add(...add);\n\t}\n\n\tisValidClassName(className: string) {\n\t\treturn className && className.startsWith(this.options.prefix);\n\t}\n}\n"],"names":["n","r","String","split","map","parseInt","concat","slice","join","e","every","t","s","match","o","i","localeCompare","numeric","Plugin","constructor","options","super","this","name","requires","swup","defaults","prefix","updateBodyClass","visit","_ref","page","html","updateClassNames","document","body","getBodyElement","mount","on","DOMParser","parseFromString","querySelector","el","newEl","remove","classList","filter","className","isValidClassName","add","startsWith"],"mappings":"0cAGO,MAAsBA,EAAIC,GACzBC,OAAOD,GACZE,MAAM,KACNC,IAAIH,GAAWC,OAAOG,SAASJ,GAAW,IAAK,MAC/CK,OAAO,CAAC,IAAK,MACbC,MAAM,EAAG,GACTC,KAAK,+nBAiCwB,EAACP,EAAmBQ,IAChCA,EAACC,MAAOD,IAC1B,MAASE,CAAAA,EAAYC,GAAWH,EAASI,MAAM,mBAAqB,GA/BxC,IAACC,EAAWC,EAiCxC,MA1BsB,EAACd,EAA0BD,KAClD,MAAiBS,EAAG,CACnB,GAAKR,GAAoB,IAANA,EACnB,IAAMA,GAAcA,EAAI,EACxB,KAAOA,GAAcA,GAAK,EAC1B,IAAMA,GAAcA,EAAI,EACxB,KAAOA,GAAcA,GAAK,GAG3B,OADqBQ,EAAYT,IAAeS,EAAY,KACxCR,EAhBqBc,EAOlB,EAPkBA,EAgCWH,EA/BpDE,EAAId,EAD0Bc,EAgCWb,GA9BzCc,EAAIf,EAAiBe,GACdD,EAAEE,cAAcD,OAAA,EAAc,CAAEE,SAAS,KA8BLN,GAA6B,KAAI,GAJ7C,qiBClCX,cAA4BO,EAUhDC,WAAAA,CAAYC,YAAAA,IAAAA,EAA4B,CAAE,GACzCC,QAAQC,KAVTC,KAAO,sBAEPC,KAAAA,SAAW,CAAEC,KAAM,OAEnBC,KAAAA,SAAoB,CACnBC,OAAQ,IACRL,KACDF,aAAO,EAAAE,KAWPM,gBAA8C,CAACC,EAAKC,KAAE,IAAEC,MAAMC,KAAEA,IAAQF,EACvER,KAAKW,iBAAiBC,SAASC,KAAMb,KAAKc,eAAeJ,GAC1D,EATCV,KAAKF,QAAU,IAAKE,KAAKI,YAAaN,EACvC,CAEAiB,KAAAA,GACCf,KAAKgB,GAAG,kBAAmBhB,KAAKM,gBACjC,CAMAQ,cAAAA,CAAeJ,GAEd,OADY,IAAIO,WAAYC,gBAAgBR,EAAM,aACvCS,cAA2B,OACvC,CAEAR,gBAAAA,CAAiBS,EAAiBC,GACjC,MAAMC,EAAS,IAAIF,EAAGG,WAAWC,OAAQC,GAAczB,KAAK0B,iBAAiBD,IACvEE,EAAM,IAAIN,EAAME,WAAWC,OAAQC,GAAczB,KAAK0B,iBAAiBD,IAC7EL,EAAGG,UAAUD,UAAUA,GACvBF,EAAGG,UAAUI,OAAOA,EACrB,CAEAD,gBAAAA,CAAiBD,GAChB,OAAOA,GAAaA,EAAUG,WAAW5B,KAAKF,QAAQO,OACvD"}