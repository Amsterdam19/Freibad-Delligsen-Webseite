{"version":3,"file":"index.modern.js","sources":["../src/index.ts"],"sourcesContent":["import { Handler } from 'swup';\nimport Plugin from '@swup/plugin';\n\ntype Options = {\n\t/** If set, only classes beginning with this string will be added/removed. */\n\tprefix: string;\n};\n\nexport default class SwupBodyClassPlugin extends Plugin {\n\tname = 'SwupBodyClassPlugin';\n\n\trequires = { swup: '>=4' };\n\n\tdefaults: Options = {\n\t\tprefix: ''\n\t};\n\toptions: Options;\n\n\tconstructor(options: Partial<Options> = {}) {\n\t\tsuper();\n\t\tthis.options = { ...this.defaults, ...options };\n\t}\n\n\tmount() {\n\t\tthis.on('content:replace', this.updateBodyClass);\n\t}\n\n\tupdateBodyClass: Handler<'content:replace'> = (visit, { page: { html } }) => {\n\t\tthis.updateClassNames(document.body, this.getBodyElement(html));\n\t};\n\n\tgetBodyElement(html: string): HTMLElement {\n\t\tconst doc = new DOMParser().parseFromString(html, 'text/html');\n\t\treturn doc.querySelector<HTMLElement>('body')!;\n\t}\n\n\tupdateClassNames(el: HTMLElement, newEl: HTMLElement) {\n\t\tconst remove = [...el.classList].filter((className) => this.isValidClassName(className));\n\t\tconst add = [...newEl.classList].filter((className) => this.isValidClassName(className));\n\t\tel.classList.remove(...remove);\n\t\tel.classList.add(...add);\n\t}\n\n\tisValidClassName(className: string) {\n\t\treturn className && className.startsWith(this.options.prefix);\n\t}\n}\n"],"names":["SwupBodyClassPlugin","Plugin","constructor","options","super","this","name","requires","swup","defaults","prefix","updateBodyClass","visit","page","html","updateClassNames","document","body","getBodyElement","_extends","mount","on","DOMParser","parseFromString","querySelector","el","newEl","remove","classList","filter","className","isValidClassName","add","startsWith"],"mappings":"gQAQqB,MAAAA,UAA4BC,EAUhDC,WAAAA,CAAYC,EAA4B,CAAE,GACzCC,QAAQC,KAVTC,KAAO,sBAAqBD,KAE5BE,SAAW,CAAEC,KAAM,OAEnBC,KAAAA,SAAoB,CACnBC,OAAQ,IACRL,KACDF,aAAO,EAAAE,KAWPM,gBAA8C,CAACC,GAASC,MAAQC,YAC/DT,KAAKU,iBAAiBC,SAASC,KAAMZ,KAAKa,eAAeJ,GAC1D,EATCT,KAAKF,QAAOgB,EAAA,CAAA,EAAQd,KAAKI,SAAaN,EACvC,CAEAiB,KAAAA,GACCf,KAAKgB,GAAG,kBAAmBhB,KAAKM,gBACjC,CAMAO,cAAAA,CAAeJ,GAEd,OADY,IAAIQ,WAAYC,gBAAgBT,EAAM,aACvCU,cAA2B,OACvC,CAEAT,gBAAAA,CAAiBU,EAAiBC,GACjC,MAAMC,EAAS,IAAIF,EAAGG,WAAWC,OAAQC,GAAczB,KAAK0B,iBAAiBD,IACvEE,EAAM,IAAIN,EAAME,WAAWC,OAAQC,GAAczB,KAAK0B,iBAAiBD,IAC7EL,EAAGG,UAAUD,UAAUA,GACvBF,EAAGG,UAAUI,OAAOA,EACrB,CAEAD,gBAAAA,CAAiBD,GAChB,OAAOA,GAAaA,EAAUG,WAAW5B,KAAKF,QAAQO,OACvD"}