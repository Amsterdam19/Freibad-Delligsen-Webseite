!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e||self).SwupBodyClassPlugin=t()}(this,function(){function e(){return e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},e.apply(this,arguments)}const t=e=>String(e).split(".").map(e=>String(parseInt(e||"0",10))).concat(["0","0"]).slice(0,3).join(".");class s{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach(e=>e()),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error("You must define a name of plugin when creating a class.")}_afterUnmount(){}_checkRequirements(){return"object"!=typeof this.requires||Object.entries(this.requires).forEach(([e,s])=>{if(!function(e,s,r){const n=function(e,t){var s;if("swup"===e)return null!=(s=t.version)?s:"";{var r;const s=t.findPlugin(e);return null!=(r=null==s?void 0:s.version)?r:""}}(e,r);return!!n&&((e,s)=>s.every(s=>{const[,r,n]=s.match(/^([\D]+)?(.*)$/)||[];var i,o;return((e,t)=>{const s={"":e=>0===e,">":e=>e>0,">=":e=>e>=0,"<":e=>e<0,"<=":e=>e<=0};return(s[t]||s[""])(e)})((o=n,i=t(i=e),o=t(o),i.localeCompare(o,void 0,{numeric:!0})),r||">=")}))(n,s)}(e,s=Array.isArray(s)?s:[s],this.swup)){const t=`${e} ${s.join(", ")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${t}`)}}),!0}on(e,t,s={}){var r;t=!(r=t).name.startsWith("bound ")||r.hasOwnProperty("prototype")?t.bind(this):t;const n=this.swup.hooks.on(e,t,s);return this.handlersToUnregister.push(n),n}once(t,s,r={}){return this.on(t,s,e({},r,{once:!0}))}before(t,s,r={}){return this.on(t,s,e({},r,{before:!0}))}replace(t,s,r={}){return this.on(t,s,e({},r,{replace:!0}))}off(e,t){return this.swup.hooks.off(e,t)}}return class extends s{constructor(e){void 0===e&&(e={}),super(),this.name="SwupBodyClassPlugin",this.requires={swup:">=4"},this.defaults={prefix:""},this.options=void 0,this.updateBodyClass=(e,t)=>{let{page:{html:s}}=t;this.updateClassNames(document.body,this.getBodyElement(s))},this.options={...this.defaults,...e}}mount(){this.on("content:replace",this.updateBodyClass)}getBodyElement(e){return(new DOMParser).parseFromString(e,"text/html").querySelector("body")}updateClassNames(e,t){const s=[...e.classList].filter(e=>this.isValidClassName(e)),r=[...t.classList].filter(e=>this.isValidClassName(e));e.classList.remove(...s),e.classList.add(...r)}isValidClassName(e){return e&&e.startsWith(this.options.prefix)}}});
//# sourceMappingURL=index.umd.js.map
